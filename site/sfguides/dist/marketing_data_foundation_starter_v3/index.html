
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Marketing Data Foundation Starter Guide V3</title>

  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5Q8R2G');</script>
  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-08H27EW14N"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-08H27EW14N');
</script>

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://quickstarts.snowflake.com/elements/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q8R2G"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
  <google-codelab-analytics gaid="UA-41491190-9"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="marketing_data_foundation_starter_v3"
                  title="Marketing Data Foundation Starter Guide V3"
                  environment="web"
                  feedback-link="https://github.com/Snowflake-Labs/sfguides/issues">
    
      <google-codelab-step label="Overview" duration="15">
        <p>Customers looking to use Snowflake for marketing use cases initially face a significant challenge: it is difficult to import all relevant marketing data into Snowflake and structure it in a unified format that downstream applications can easily utilize to power data-driven marketing. This starter solution tackles this challenge by offering an integrated application that unifies data sets from different Connectors and Marketing Data providers.</p>
<p>In this example we are adding support for:</p>
<ul>
<li>Fivetran / Facebook Ads</li>
<li>Omnata / LinkedIn Ads</li>
</ul>
<p>This solution was inspired by how Snowflake runs its own end-to-end Marketing workflows entirely on top of the Snowflake Marketing Data Cloud.</p>
<p>In the fast-evolving marketing landscape, the emphasis on data-driven strategies has become more pronounced than ever. A significant trend is the increase in Martech investments, with 63% of Chief Marketing Officers (CMOs) planning to increase their spending within the next 12 months. Such investments are crucial for enhancing customer engagement, refining marketing strategies, and driving sales through advanced data analysis. The high ROI that businesses achieve from data-driven personalization also highlights its importance. Reports indicate that enterprises see returns of 5 to 8 times on their marketing budgets, which demonstrates the value of personalized marketing in boosting conversion rates, enhancing customer loyalty, and increasing revenue.</p>
<p>Additionally, the industry is shifting towards first-party data ownership, a move propelled by the deprecation of third-party cookies. This shift is essential for maintaining direct customer relationships and adapting to changing privacy norms. The promise of generative AI and the understanding that an effective AI strategy requires a robust data strategy have spurred efforts to centralize marketing data within Snowflake. Organizations aim to organize data into standard schemas that Large Language Models (LLMs) can understand, employing these models in innovative ways to personalize content and predict customer behavior. Two types of first-party data are pivotal in these efforts: Customer 360 Data and Campaign Intelligence. The former strives to provide a holistic view of the customer by integrating and managing comprehensive data. In contrast, Campaign Intelligence focuses on data related to marketing campaigns, aiming to optimize performance and strategy. These elements are fundamental to successful data-driven marketing, underscoring the need for sophisticated data management and analytics capabilities.</p>
<h2 is-upgraded>Context</h2>
<p>As described in the diagram below, the two Data Foundation use cases in this starter lay the groundwork to support the two Marketing Execution use cases: Planning &amp; Activation, and Measurement.</p>
<p>As described in the diagram below, the two Data Foundation use cases in this starter lay the groundwork to support the two Marketing Execution use cases: Planning &amp; Activation, and Measurement.</p>
<p class="image-container"><img alt="context" src="img/d60b77a64debdaa7.png"></p>
<p>More specifically, this solution covers Data Ingestion, Semantic Unification, and based Analytics use cases for Customer 360 and Campaign Intelligence data.</p>
<p class="image-container"><img alt="context" src="img/46bc1f85a0666df9.png"></p>
<h2 is-upgraded>Architecture</h2>
<p>This demo consists of a native application that provides a framework to easily unify marketing data sources and then leverage LLM functions to explore that data and get valuable business intelligence information from the data that was ingested.</p>
<p class="image-container"><img alt="architecture" src="img/4d7e567817c746e6.png"></p>
<h2 is-upgraded>What You Will Learn</h2>
<ul>
<li>How to build a native application in Snowflake and how to deploy the same to your account using Snow CLI quickly.</li>
<li>How to use Snowpark Python to build a data pipeline that ingests data from different sources and unifies it into a single source of truth for Marketing Data.</li>
</ul>
<h2 is-upgraded>What You Will Build</h2>
<ul>
<li>A Native Application that ingests data from different sources and unifies it into a single source of truth for Marketing Data.</li>
</ul>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>Go to the <a href="https://signup.snowflake.com/?utm_cta=quickstarts_" target="_blank">Snowflake Account</a> sign-up page and register for a free account. After registration, you will receive an email containing a link that will take you to Snowflake, where you can sign in.</li>
<li>A Snowflake Role with access to create Compute Pools, create Warehouses and Databases.</li>
<li>A <a href="https://github.com/" target="_blank">GitHub</a> Account.</li>
<li><a href="https://code.visualstudio.com/download" target="_blank">VSCode</a> Installed.</li>
<li><a href="https://docs.snowflake.com/developer-guide/snowflake-cli/index" target="_blank">Snow CLI</a> Installed.</li>
<li><a href="https://www.docker.com/products/docker-desktop/" target="_blank">Docker Desktop</a> Installed.</li>
<li><a href="https://www.python.org/downloads/" target="_blank">Python</a> Installed.</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Setup" duration="2">
        <h2 is-upgraded>Clone GitHub repository</h2>
<p>Clone the git repo to your local machine:</p>
<pre>git clone https://github.com/Snowflake-Labs/sfguide-marketing-data-foundation-starter-v3
</pre>
<h2 is-upgraded>Create a connection</h2>
<pre>snow connection add
</pre>
<p>Refer to the following below to create a connection:</p>
<pre><code language="language-shell" class="language-shell">Enter connection name: marketing_demo_v3_conn
Enter account: [type in your account locator]
Enter user: [type in your username]
Enter password: [type in your password]
Enter role: accountadmin
Enter warehouse: [optional: press ENTER to skip]
Enter database: snowflake
Enter schema: account_usage
Enter host: [optional: press ENTER to skip]
Enter port: [optional: press ENTER to skip]
Enter region: [optional: press ENTER to skip]
Enter authenticator: [optional: press ENTER to skip]
Enter private key file: [optional: press ENTER to skip]
Enter token file path: [optional: press ENTER to skip]
Wrote new connection marketing_demo_v3_conn to /path_to_your_configuration_file/.snowflake/connections.toml
</code></pre>
<p>Let&#39;s set the connection to the default connection:</p>
<pre>snow connection set-default marketing_demo_v3_conn
</pre>
<p>To review the new created connection use:</p>
<pre>snow connection list
</pre>
<p>Refer to the desired output below:</p>
<pre><code language="language-shell" class="language-shell">+------------------------+------------------------------------------------------------------------------------------------------------------------------------------+---------------+
| connection_name        | parameters                                                                                                                               | is_default    |
|------------------------+------------------------------------------------------------------------------------------------------------------------------------------+---------------|
| marketing_demo_v3_conn | {&#39;account&#39;: &#39;******&#39;, &#39;user&#39;: &#39;******&#39;, &#39;password&#39;: &#39;****&#39;, &#39;database&#39;: &#39;snowflake&#39;, &#39;schema&#39;: &#39;account_usage&#39;, &#39;role&#39;: &#39;accountadmin&#39;}  | True          |
+------------------------+------------------------------------------------------------------------------------------------------------------------------------------+---------------+
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Deploy the Native App" duration="2">
        <h2 is-upgraded>Docker Desktop</h2>
<p>Ensure that Docker Desktop is running and that you&#39;re signed in to your Docker account.</p>
<h2 is-upgraded>Bypass MFA</h2>
<p>Create a Worksheet in Snowsight and run the following command to disble MFA for 30 minutes. This statement is to allow the many cells in the Jupyter Notebook to run successfully without waiting for MFA approval from the user.</p>
<pre><code language="language-sql" class="language-sql">ALTER USER &lt;replace with your user&gt; SET MINS_TO_BYPASS_MFA = 45;
</code></pre>
<h2 is-upgraded>Open Docker Desktop</h2>
<p>Open Docker Desktop and sign into your Docker account. Leave the Docker Desktop application open in the background.</p>
<h2 is-upgraded>To use VSCode</h2>
<p>Open the project with VSCode and select the <a href="https://github.com/Snowflake-Labs/sfguide-marketing-data-foundation-starter-v3/blob/main/scripts/deployment_na_spcs.ipynb" target="_blank"><strong>deployment.ipynb</strong></a> file from the File explorer. Then, select the virtual environment you created as the execution kernel for this notebook.</p>
<p class="image-container"><img alt="vscode" src="img/882d8836d89663f2.png"></p>
<p>Click on the <strong>Run All</strong> button to execute all the code cells described in this notebook, or you can execute each cell manually.</p>
<p>After the execution of this notebook you will see some new assets created in your Snowflake account. The application and the application package should be listed in your databases list.</p>
<p class="image-container"><img alt="snowflake_objects" src="img/11b64a445ba126a2.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Open the Native App" duration="2">
        <h2 is-upgraded>Open the Native App</h2>
<p>In the <strong><em>Data Products/ Apps</em></strong> section, you will see the recently created Marketing Data Foundation native application:</p>
<p class="image-container"><img alt="app_list" src="img/e84052d097c4fc8d.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Use the Native App" duration="5">
        <p>After you deploy this native app in your account, navigate to the Data Products / Apps section in Snowsight and open the<br><strong>Marketing Data Foundation</strong> application.</p>
<p class="image-container"><img alt="NativeApp" src="img/a026069c150d65a8.png"></p>
<p>Take some time to grant privileges to <code>IMPORTED PRIVILEGES ON SNOWFLAKE DB</code>, <code>CREATE COMPUTE POOL</code>, <code>BIND SERVICE ENDPOINT</code>, and<code>CREATE WAREHOUSE</code>. Afterward, click on <strong>Update Privileges</strong> and <strong>Launch app</strong>.</p>
<p class="image-container"><img alt="UpdatePrivileges" src="img/bcda7922a0833d8c.png"></p>
<h2 is-upgraded>1. Select the Data provider</h2>
<p>To execute the solution click <strong>Add New Source</strong> at the top of the page and open the Data Models &amp; Mappings section in the application&#39;s sidebar menu. You will see the list of supported Data source providers. For this version only Facebook and LinkedIn are supported.</p>
<p class="image-container"><img alt="AddNewSource" src="img/14889ef1b011d842.png"></p>
<p>Select any of those options to continue with the solution. Sample data are provided for both options so it is not a requirement to have Fivetran or Omnata installed and configured.</p>
<p>The provided sample data emulates the structure of the raw data generated by both connectors.</p>
<p>For this solution, only the combinations of Fivetran/Facebook and Linked/Omnata are supported.</p>
<h2 is-upgraded>2. Configure the connection</h2>
<p>After you select any of the Data providers options you will continue to the Connection configuration.</p>
<p>These steps will provide instructions on how to bring the data to Snowflake or connect it with data already in Snowflake.</p>
<p class="image-container"><img alt="LinkData" src="img/dbbbd7c65fe34e85.png"></p>
<p>Since we are going to use the sample data, you can continue to the <strong><em>Link data already in Snowflake</em></strong> option.</p>
<p>Depending on the platform selected in the previous step, please select either of these options</p>
<p>Facebook:</p>
<ul>
<li>DATABASE: <code>FIVETRAN_CONNECTOR_DEMO</code> SCHEMA: <code>FACEBOOK_RAW</code></li>
</ul>
<p>LinkedIn:</p>
<ul>
<li>DATABASE: <code>OMNATA_CONNECTOR_DEMO</code> SCHEMA: <code>LINKEDIN_RAW</code></li>
</ul>
<p>When you click on the connect option, the application will verify you have access to the sample data  and will show you the list of tables in the selected schema.</p>
<p class="image-container"><img alt="Fivetran" src="img/7bc7fb6fcb4f1cee.png"></p>
<h2 is-upgraded>3. Explore and Apply Mappings</h2>
<p>This application applies a set of predefined mappings to generate a unified marketing data model that can be used for business intelligence over the data that was ingested.</p>
<p>You can explore or apply the mappings using the options provided in this screen:</p>
<p class="image-container"><img alt="Mappings1" src="img/b240fc2c56f5224.png"></p>
<p>The mappings are shown using a custom component that highlights the columns used from the source data and the target column in the unified data model:</p>
<p class="image-container"><img alt="Mappings2" src="img/a0c183f712775905.png"></p>
<h2 is-upgraded>4. Visualizations</h2>
<p>After you apply the mappings the application will generate several schemas inside the application&#39;s database. The unified data model will be used to generate some basic visualizations that provide insights about the ingested data:</p>
<p class="image-container"><img alt="Visualizations" src="img/362332bc5a5c9c2d.png"></p>
<p>The unified data model is stored in the Database <code>MARKETING_DATA_FOUNDATION_STARTER_V3_USERNAME</code> (replace with your username) and the Schema <code>TARGET</code>.</p>
<h2 is-upgraded>5. AI Functions</h2>
<p>The application also provides AI Functions that can be explored:</p>
<h3 is-upgraded>Data Quality</h3>
<p>Provides access to a set of predefined Snowflake Notebooks with some sample Customer 360 cases.</p>
<p class="image-container"><img alt="DataQuality" src="img/99d4c0dda2d61e4.png"></p>
<h3 is-upgraded>AI Assistant Bot</h3>
<p>Under the AI Assistant option you will find a Chatbot that allows you to ask questions related to either Data Engineering using your ingested data as input.</p>
<p class="image-container"><img alt="AIAssistant" src="img/963e224b4a45e8b.png"></p>
<p class="image-container"><img alt="AIAssistant2" src="img/a1b727817378e37e.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Restart the Solution" duration="0">
        <pre><code language="language-SQL" class="language-SQL">USE ROLE ACCOUNTADMIN;

-- Replace NAME with the actual value of your database
DROP DATABASE IF EXISTS MARKETING_DATA_FOUNDATION_STARTER_V3_NAME CASCADE;
DROP DATABASE IF EXISTS MARKETING_DATA_FOUNDATION_V3 CASCADE;
DROP DATABASE IF EXISTS C360_SAMPLE_DB CASCADE;
DROP DATABASE IF EXISTS FIVETRAN_CONNECTOR_DEMO CASCADE;
DROP DATABASE IF EXISTS DATA_QUALITY_NOTEBOOKS CASCADE;
DROP DATABASE IF EXISTS OMNATA_CONNECTOR_DEMO CASCADE;
DROP DATABASE IF EXISTS LLM_DEMO CASCADE;

-- Replace application name with your application name
DROP APPLICATION IF EXISTS MARKETING_DATA_FOUNDATION_STARTER_V3_REPLACE_WITH_YOUR_APPLICATION_NAME CASCADE;
-- Replace application package name with your application package name
DROP APPLICATION PACKAGE IF EXISTS MARKETING_DATA_FOUNDATION_STARTER_V3_PKG_REPLACE_WITH_YOUR_APPLICATION_PACKAGE_NAME; 

ALTER COMPUTE POOL IF EXISTS MARKETING_DATA_FOUNDATION_COMPUTE_POOL STOP ALL;
DROP COMPUTE POOL IF EXISTS MARKETING_DATA_FOUNDATION_COMPUTE_POOL;

DROP WAREHOUSE IF EXISTS MARKETING_DATA_FOUNDATION_WAREHOUSE;
DROP WAREHOUSE IF EXISTS MDFSV3SPCS_XSMALL_WH;
DROP WAREHOUSE IF EXISTS MDFSV3SPCS_BUILD_WH;

DROP ROLE IF EXISTS MARKETING_DATA_FOUNDATION_V3_ROLE;
</code></pre>
<p>Use this cleanup script to remove all objects created in this Quickstart.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Conclusion And Resources" duration="2">
        <h2 is-upgraded>Overview</h2>
<p>Congratulations! You have successfully learned how to easily build an end-to-end Native Application and load sample data.</p>
<h2 is-upgraded>What You Learned</h2>
<ul>
<li>How to host and build a basic native app for Marketing Campaign Intelligence data.</li>
<li>Generate a set of views that aggregate data from Marketing providers like LinkedIn and Facebook.</li>
<li>Generate quick summaries and Charts using that data to create an integrated dashboard using Streamlit.</li>
</ul>
<h2 is-upgraded>Resources</h2>
<p>Want to learn more about the tools and technologies used by your app? Check out the following resources:</p>
<ul>
<li><a href="https://github.com/Snowflake-Labs/sfguide-marketing-data-foundation-solution" target="_blank">Source Code on GitHub</a></li>
<li><a href="https://docs.snowflake.com/en/developer-guide/snowpark/python/index" target="_blank">Snowpark Python Developer Guide</a></li>
<li><a href="https://www.snowflake.com/resource/the-data-engineers-guide-to-python-for-snowflake/" target="_blank">Snowpark Guide for Data Engineers</a></li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/native-shim.js"></script>
  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/custom-elements.min.js"></script>
  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/prettify.js"></script>
  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("2025084205");
  </script>
</body>
</html>
